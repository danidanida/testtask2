{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/bahdana/Desktop/react_dec/my-app/src/components/Tree.js\";\nimport React, { PureComponent } from 'react';\nimport { Treebeard } from 'react-treebeard';\nconst data = [];\nexport class Tree extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data\n    };\n    this.onToggle = this.onToggle.bind(this);\n  }\n\n  onToggle(node, toggled) {\n    const {\n      cursor,\n      data\n    } = this.state;\n\n    if (cursor) {\n      this.setState(() => ({\n        cursor,\n        active: true\n      }));\n    }\n\n    node.active = true;\n\n    if (node.children) {\n      node.toggled = toggled;\n    }\n\n    this.setState(() => ({\n      cursor: node,\n      data: Object.assign({}, data)\n    }));\n  }\n\n  async componentDidMount() {\n    const URL = '/api/regions';\n    const response = await fetch(URL); //console.log(response)\n\n    const data = await response.json();\n    console.log(data);\n    const formatedData = this.formatData(data);\n    console.log(formatedData);\n    this.setState({\n      data: formatedData\n    });\n  }\n\n  formatData(serverData) {\n    var data = {\n      name: \"\",\n      toggled: true,\n      children: []\n    };\n    let newArray = [];\n\n    for (let i = 0; i < serverData.length; i++) {\n      serverData[i].path = serverData[i].path.split(\".\");\n    }\n\n    serverData.forEach(el => {\n      if (el.path.length === 1) {\n        // grandpa \n        newArray.push({\n          name: el.name,\n          children: []\n        });\n      }\n\n      if (el.path.length === 2) {\n        // parent\n        newArray[Number(el.path[0]) - 1].children.push({\n          name: el.name,\n          children: []\n        });\n      }\n\n      if (el.path.length === 3) {\n        // children\n        newArray[Number(el.path[0]) - 1].children[Number(el.path[0]) - 1].children.push({\n          name: el.name,\n          children: []\n        });\n      }\n    });\n    data.children = newArray;\n    return data;\n  }\n\n  render() {\n    const {\n      data\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Treebeard, {\n      data: data,\n      onToggle: this.onToggle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 18\n    }, this);\n  }\n\n}\nexport default Tree;","map":{"version":3,"sources":["/Users/bahdana/Desktop/react_dec/my-app/src/components/Tree.js"],"names":["React","PureComponent","Treebeard","data","Tree","constructor","props","state","onToggle","bind","node","toggled","cursor","setState","active","children","Object","assign","componentDidMount","URL","response","fetch","json","console","log","formatedData","formatData","serverData","name","newArray","i","length","path","split","forEach","el","push","Number","render"],"mappings":"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","sourcesContent":["import React, {\n    PureComponent\n} from 'react';\nimport {\n    Treebeard\n} from 'react-treebeard';\n\nconst data = [];\n\n\nexport class Tree extends PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data\n        };\n        this.onToggle = this.onToggle.bind(this);\n    }\n\n    onToggle(node, toggled) {\n        const {\n            cursor,\n            data\n        } = this.state;\n        if (cursor) {\n            this.setState(() => ({\n                cursor,\n                active: true\n            }));\n        }\n        node.active = true;\n        if (node.children) {\n            node.toggled = toggled;\n        }\n        this.setState(() => ({\n            cursor: node,\n            data: Object.assign({}, data)\n        }));\n    }\n    async componentDidMount() {\n        const URL = '/api/regions';\n        const response = await fetch(URL);\n        //console.log(response)\n        const data = await response.json()\n        console.log(data)\n        const formatedData = this.formatData(data)\n        console.log(formatedData)\n        this.setState({\n            data: formatedData\n        })\n    }\n\n     formatData (serverData) {\n        var data = {name: \"\", toggled:true, children:[]}\n      let newArray = [];\n      \n      for (let i=0; i < serverData.length; i++) {\n        serverData[i].path = serverData[i].path.split(\".\")\n      }\n       serverData.forEach(el => {\n         if (el.path.length === 1) { // grandpa \n           newArray.push({name: el.name, children: []})\n         }\n       \n         if (el.path.length === 2) { // parent\n           newArray[Number(el.path[0])-1].children.push({name: el.name, children: []}) \n         }\n         if (el.path.length === 3) { // children\n           newArray[Number(el.path[0])-1].children[Number(el.path[0])-1].children.push({name: el.name, children: []}) \n         } \n       }) \n       data.children = newArray\n      return data\n      }\n\n    render() {\n        const {\n            data\n        } = this.state;\n        return ( <\n            Treebeard data = {\n                data\n            }\n            onToggle = {\n                this.onToggle\n            }\n            />\n        );\n    }\n}\nexport default Tree\n\n\n"]},"metadata":{},"sourceType":"module"}